---
title: "Assignment 2"
author: "Jacob Shore & Derek Huang"
date: "February 12, 2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(ggplot2)
library(infer)
library(skimr)
library(broom)
library(readr)
options(digits=10)
```

# Introduction:
We are interested in examining the relationship between square footage of living space of a house and that house's price for houses sold in 2015 in King County, WA (mostly Seattle). Specifically, we are curious if square footage of living space is a good predictor of price for these houses.

```{r}

ggplot(housing)+geom_point(aes(x = sqft_living, y = price))
# price vs. sqft living

housing_lm <- lm(price ~ sqft_living, data=housing)
# untransformed model

augment(housing_lm) %>%
ggplot( aes(x=.fitted, y=.std.resid)) +
geom_point() +
geom_hline(yintercept = 0)
# untransformed std. resid. plot


housing_lm2 <- lm(price ~ log(sqft_living), data=housing)
# transforming X using log (logrithmic model)

augment(housing_lm2) %>%
ggplot( aes(x=.fitted, y=.std.resid)) +
geom_point() +
geom_hline(yintercept = 0)
# transformed log(x) residual


housing_lm3 <- lm(log(price) ~ log(sqft_living), data=housing)
# transforming both X and Y using log (power model)

housing %>%
ggplot(aes(x=log(sqft_living), y=log(price))) +
geom_point() +
geom_smooth(method="lm", se=FALSE)
# transformed data plot

augment(housing_lm3) %>%
ggplot( aes(x=.fitted, y=.std.resid)) +
geom_point() +
geom_hline(yintercept = 0)
# power model residual
```
Before the transformation, the data are not linear with constant variability. And then we tried transformation X with log, and again the data are not linear with constant variability. In the end, we tried tranforming both X and Y with log, and this time the data are linear with constant variability. 

```{r}
summary(housing_lm3)
```
# Hypothesis Test
We now run a hypothesis test on the value of $\beta_1$. Our null hypothesis is that $\beta_1 = 0$, and our alternative hypothesis is that $\beta_1 \neq 0$. As shown in the table above, the t-test statistic is 134, yielding a p-value of effectively 0. Thus, we may reject the null hypothesis at any reasonable level, and say with confidence that $\beta_1 = 0$ is false, and there is in fact some linear relationship between the logarithm of square footage of living space and the logarithm of price for houses sold in King County in 2015.

```{r}
specific <- data.frame(sqft_living=log(2000))
predict(housing_lm3, newdata = specific, interval = 'confidence', level = .95)
```

